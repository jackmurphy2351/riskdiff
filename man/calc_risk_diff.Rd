% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_risk_diff.R
\name{calc_risk_diff}
\alias{calc_risk_diff}
\title{Calculate Risk Differences with Robust Model Fitting}
\usage{
calc_risk_diff(
  data,
  outcome,
  exposure,
  adjust_vars = NULL,
  strata = NULL,
  link = "auto",
  alpha = 0.05,
  verbose = FALSE
)
}
\arguments{
\item{data}{A data frame containing all necessary variables}

\item{outcome}{Character string naming the binary outcome variable (must be 0/1 or logical)}

\item{exposure}{Character string naming the exposure variable of interest}

\item{adjust_vars}{Character vector of variables to adjust for (default: NULL)}

\item{strata}{Character vector of stratification variables (default: NULL)}

\item{link}{Character string specifying link function: "auto", "identity", "log", or "logit" (default: "auto")}

\item{alpha}{Significance level for confidence intervals (default: 0.05)}

\item{verbose}{Logical indicating whether to print diagnostic messages (default: FALSE)}
}
\value{
A tibble containing:
\itemize{
\item exposure_var: Name of exposure variable
\item rd: Risk difference estimate
\item ci_lower: Lower confidence interval
\item ci_upper: Upper confidence interval
\item p_value: P-value for test of no difference
\item model_type: Link function used ("identity", "log", "logit")
\item n_obs: Number of observations
\item Additional columns for stratification variables if specified
}
}
\description{
Calculates risk differences (or prevalence differences for cross-sectional data)
using generalized linear models with identity, log, or logit links. Includes
support for stratification, adjustment variables, and robust model fitting.
}
\details{
The function attempts to fit models in the following order:
\enumerate{
\item Identity link (gives direct risk differences)
\item Log link (relative risk model, transformed to risk differences)
\item Logit link (odds ratio model, transformed to risk differences)
}

For identity link models, robust starting values are calculated using
empirical proportions or logistic model transformations.
}
\examples{
# Simple risk difference
data(birthweight)
rd_simple <- calc_risk_diff(
  data = birthweight,
  outcome = "low_birthweight",
  exposure = "smoking"
)
print(rd_simple)

# Age-adjusted risk difference
rd_adjusted <- calc_risk_diff(
  data = birthweight,
  outcome = "low_birthweight",
  exposure = "smoking",
  adjust_vars = "maternal_age"
)
print(rd_adjusted)

}
